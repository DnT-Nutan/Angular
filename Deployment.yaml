apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-react-app
spec:
  replicas: 1
  selector:
    matchLabels:
      app: my-react-app
  template:
    metadata:
      labels:
        app: my-react-app
    spec:
      containers:
        - name: my-react-app
          image: azregistry.azurecr.io/my-react-app:latest
          ports:
            - containerPort: 80

---
apiVersion: v1
kind: Service
metadata:
  name: my-react-app-service
spec:
  type: LoadBalancer
  selector:
    app: my-react-app
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80

---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: my-react-app-ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
spec:
  ingressClassName: nginx
  tls:
  - secretName: test.tls  
  rules:
  - host: test.p.frii.site  
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: my-react-app-service
            port:
              number: 80


----
apiVersion: v1
kind: Secret
metadata:
  name: test-tls
  namespace: default  
type: kubernetes.io/tls
data:
  tls.crt: |-
    LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUY4RENDQk5pZ0F3SUJBZ0lTQStEbThjWmdjSDE3bFpOV29ZcUl6L00xTUEwR0NTcUdTSWIzRFFFQkN3VUEKTURNeEN6QUpCZ05WQkFZVEFsVlRNUll3RkFZRFZRUUtFdzFNWlhRbmN5QkZibU55ZVhCME1Rd3dDZ1lEVlFRRApFd05TTVRFd0hoY05NalV3TVRJNE1USTBPREkzV2hjTk1qVXdOREk0TVRJME9ESTJXakFiTVJrd0Z3WURWUVFECkV4QjBaWE4wTG5BdVpuSnBhUzV6YVhSbE1JSUNJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBZzhBTUlJQ0NnS0MKQWdFQW5LOHd0eWVYNlFaUk41WWhVcHdzYW1VYmxSMGFHRGpkVjVrNE1FRytWb2pMNld1cEFWazNxMURxd2JwQwpVTTdNNEp2elp3OU1nMjBMUTVwdElsODZEZmhWU3NDN0NwUVFIdDFtKytRRnlGeFBnVGV2dUZUd2RpcE5HbktZCkhGRktrWERFbXJHN1NEL1lhM0RXUjg1Q0diR1lqTytTVDhXb0tvb1hWcklFMk5Rd0dadjZYNGswclp3TkZiSGwKb2pDUWovQjhyTzJ0aVJQR0pHejZ0UDdPT21sNFJZelhUZURGbDhUcG5mMjVUdXl2T3ErVm5mRW53ay9BWlVnZAptTnJGeGRIbUZTSDF4bk1samt3Y0h6eDgyaGo2OHdYdzZRSGNjVkFPZlQvUUhYMmRpS21VZkgrWFBrdngxbGc4CkdtL2d6eHVuM3FWd2psbE1VbVJOSFBybXpURFJlOWwxNG9qNkhSWlRiWDhBYjlDaFkwSFlIcC9McGszV1MzMlUKZFVrd0lJeklPcmVwZnBaVDAwTTV4UGY0akNuTS9sdGNNMUpnVDJjcS9pNkx5czc5N3l3d0MySjlUaTdyOE5VSwpMN0w4dkZEUndEUlFaNzhmZC8vc1JiRmZ1YUhxYnh2eWJOU21UUGk2NUJrcHhrdkFPZnI4L28wQ1p0ZmYxRXdFCmdzN2pTVGV2Z2JYUG54MmZnN2NxQkRGeUx3aTdoblEyV2YzclRzVTdWd0lJVTN0RWpUVzE0NnQzQUIzL3BDUUYKaXNQNC8vUFd3L1hENE0vZFhYVlIrZU9WOGY0M1N2WlVwcHZvbFpZOWZpZzZLVTMycXphQzE1SkplYlZ5ZVBoNwpLenVhZWEzS0RuelJoc0NTUWNsOHR3WEhkd1IybGZvOUI2a1pKUFZsNHpuN1RVTUNBd0VBQWFPQ0FoUXdnZ0lRCk1BNEdBMVVkRHdFQi93UUVBd0lGb0RBZEJnTlZIU1VFRmpBVUJnZ3JCZ0VGQlFjREFRWUlLd1lCQlFVSEF3SXcKREFZRFZSMFRBUUgvQkFJd0FEQWRCZ05WSFE0RUZnUVVUQ1pQSGxPc0RVTzhtM0RJRmZWM1R5MnN5Qzh3SHdZRApWUjBqQkJnd0ZvQVV4YzlHcE9yMHc4QjZiSlhFTGJCZWtpOG00N2t3VndZSUt3WUJCUVVIQVFFRVN6QkpNQ0lHCkNDc0dBUVVGQnpBQmhoWm9kSFJ3T2k4dmNqRXhMbTh1YkdWdVkzSXViM0puTUNNR0NDc0dBUVVGQnpBQ2hoZG8KZEhSd09pOHZjakV4TG1rdWJHVnVZM0l1YjNKbkx6QWJCZ05WSFJFRUZEQVNnaEIwWlhOMExuQXVabkpwYVM1egphWFJsTUJNR0ExVWRJQVFNTUFvd0NBWUdaNEVNQVFJQk1JSUJCQVlLS3dZQkJBSFdlUUlFQWdTQjlRU0I4Z0R3CkFIWUF6UHNQYW9WeENXWCtsWnRUenVteWZDTHBoVndObDQyMnFYNVV3UDVNRGJBQUFBR1VyU3BMcUFBQUJBTUEKUnpCRkFpRUE0Wmx6eDVzVFU5TkwrQ3FSWTFPMnQ0NWpMZjBBSUFrdkZEQ0c2WFlMVzFBQ0lIdXBQb2dnWElieQoxV3hKSDFpQXpQcmlTVWtzaEdmUmNCYmdJR3pFWjYxQUFIWUE0Skt6L0F3ZHlPZG9OaC9lWWJtV1RRcFNlQm1LCmN0Wnl4TEJOcFcxdlZBUUFBQUdVclNwTHJRQUFCQU1BUnpCRkFpQm93SFpmWm9xUk5aYk0yRHRTVVdvb0oyc0gKYXdSeWRPUVhOZ2FXTkwwT2N3SWhBTytzdEJhbWwyZ0NmOUs1RHlkK21rZWVQNTFITE8yZ2VrdkRwbTljUk14awpNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUEyUENJTWo1VUJ0b2x2UENnenNtbnNOc2lqaHJaNXFkOG52WWdZCjhJVXhmM3M5WllHTzd4TkwyZmxpN2JWQXc4VFhob28xclFhN3dCbEh3b2RoTTFGTzFhVjVvWjIybjB6bWZna0EKM21Cb3BjeWNtS29KYzJhQXNVejUzQTVMK3dwYmZmS3lMRXlLeXBDWkhxTlpIQ1JmdlZOdk8yT1BobXhiaTQ0ZwozQVBqTTU2b2w1bkxGTkpVcWxuay9xdnArc3pIVitJZHF5VmxqZlVuRzBvcXpOZ0duT1NmbGJ3VXlDRzBuQ0F5CnZrcjRxSUZjNllFM3AxMHFmN2dkaHR5SEd6VFFKdHFuNkhob2EvSGg2ODA0bGtMbXRyTmpRRjVGam0vTHdVU1kKNmY1ejgzYmZwRzJRUjd2MUJzNFlTRXVJSlp1OEpSVGlGVXd3U0ZWdDVTY1h3V002Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZCakNDQXU2Z0F3SUJBZ0lSQUlwOVBoUFdMekR2STRhOUtRZHJOUGd3RFFZSktvWklodmNOQVFFTEJRQXcKVHpFTE1Ba0dBMVVFQmhNQ1ZWTXhLVEFuQmdOVkJBb1RJRWx1ZEdWeWJtVjBJRk5sWTNWeWFYUjVJRkpsYzJWaApjbU5vSUVkeWIzVndNUlV3RXdZRFZRUURFd3hKVTFKSElGSnZiM1FnV0RFd0hoY05NalF3TXpFek1EQXdNREF3CldoY05NamN3TXpFeU1qTTFPVFU1V2pBek1Rc3dDUVlEVlFRR0V3SlZVekVXTUJRR0ExVUVDaE1OVEdWMEozTWcKUlc1amNubHdkREVNTUFvR0ExVUVBeE1EVWpFeE1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQgpDZ0tDQVFFQXVvZThYQnNBT2N2S0NzM1VaeEQ1QVR5bFRxVmh5eWJLVXZzVkFiZTVLUFVvSHUwbnN5UVlPV2NKCkRBanM0RHF3TzNjT3ZmUGxPVlJCREU2dVFkYVpkTjVSMis5Ny8xaTlxTGNUOXQ0eDFmSnl5WEpxQzROMGxaeEcKQUdRVW1mT3gyU0xaemFpU3Fod21lai8rNzFnRmV3aVZnZHR4RDQ3NzR6RUp1d20rVUUxZmo1RjJQVnFkbm9QeQo2Y1JtcytFR1prTklHSUJsb0RjWW1wdUVNcGV4c3IzRStCVUFuU2VJKytKakY1WnNteWRuUzhUYktGNXB3bm53ClNWemdKRkRoeEx5aEJheDdRRzBBdE1KQlA2ZFl1Qy9GWEp1bHV3bWU4Zjdyc0lVNS9hZ0s3MFhFZU90bEtzTFAKWHp6ZTQxeE5HL2NMSnl1cUMwSjNVMDk1YWgySDJRSURBUUFCbzRINE1JSDFNQTRHQTFVZER3RUIvd1FFQXdJQgpoakFkQmdOVkhTVUVGakFVQmdnckJnRUZCUWNEQWdZSUt3WUJCUVVIQXdFd0VnWURWUjBUQVFIL0JBZ3dCZ0VCCi93SUJBREFkQmdOVkhRNEVGZ1FVeGM5R3BPcjB3OEI2YkpYRUxiQmVraThtNDdrd0h3WURWUjBqQkJnd0ZvQVUKZWJSWjVudTI1ZVFCYzRBSWlNZ2FXUGJwbTI0d01nWUlLd1lCQlFVSEFRRUVKakFrTUNJR0NDc0dBUVVGQnpBQwpoaFpvZEhSd09pOHZlREV1YVM1c1pXNWpjaTV2Y21jdk1CTUdBMVVkSUFRTU1Bb3dDQVlHWjRFTUFRSUJNQ2NHCkExVWRId1FnTUI0d0hLQWFvQmlHRm1oMGRIQTZMeTk0TVM1akxteGxibU55TG05eVp5OHdEUVlKS29aSWh2Y04KQVFFTEJRQURnZ0lCQUU3aWlWMEtBeHlRT05EMUgvbHhYUGpEajdJM2lIcHZzQ1VmN2I2MzJJWUdqdWtKaE0xeQp2NEh6L01yUFUwanR2ZlpwUXRTbEVUNDF5Qk95a2gwRlgrb3UxTmo0U2NPdDlabVduTzhtMk9HMEpBdElJRTM4CjAxUzBxY1loeU9FMkcvOTNaQ2tYdWZCTDcxM3F6WG5RdjVDL3ZpT3lrTnBLcVVneGRLbEVDK0hpOWkyRGNhUjEKZTlLVXdRVVpSaHk1ai9QRWRFZ2xLZzNsOWR0RDR0dVRtN2tadEI4djMyb09qekhUWXcrN0tkemRaaXcvc0J0bgpVZmhCUE9STnVheTRwSnhtWS9XcmhTTWR6Rk8ycTNHdTNNVUJjZG8yN2dvWUtqTDlDVEY4ai9aejU1eWN0VW9WCmFuZUNXcy9halVYK0h5cGtCVEErYzhMR0RMbldPMk5LcTBZRC9wbkFSa0FuWUdQZlVEb0hSOWdWU3AvcVJ4K1oKV2doaURMWnNNd2hOMXpqdFNDMHVCV2l1Z0YzdlROellJRUZmYVBHN1dzM2pEckFNTVllYlE5NUpRK0hJQkQvUgpQQnVIUlRCcHFLbHlEbmtTSERIWVBpTlgzYWRQb1BBY2dkRjNIMi9XMHJtb3N3TVdnVGxMbjFXdTBtcmtzNy9xCnBkV2ZTNlBKMWp0eTgwcjJWS3NNL0RqM1lJRGZialhLZGFGVTVDKzhiaGZKR3FVM3RhS2F1dXowd0hWR1QzZW8KNkZsV2tXWXRidDRwZ2RhbWx3VmVaRVcrTE03cVpFSkVzTU5QcmZDMDNBUEttWnNKZ3BXQ0RXT0tadmtaY3ZqVgp1WWtRNG9tWUNUWDVvaHkra25NamRPbWRIOWM3U3BxRVdCREM4NmZpTmV4K08wWE9NRVpTYThEQQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t
  tls.key: |-
    LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUpRd0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQ1Mwd2dna3BBZ0VBQW9JQ0FRQ2NyekMzSjVmcEJsRTMKbGlGU25DeHFaUnVWSFJvWU9OMVhtVGd3UWI1V2lNdnBhNmtCV1RlclVPckJ1a0pRenN6Z20vTm5EMHlEYlF0RAptbTBpWHpvTitGVkt3THNLbEJBZTNXYjc1QVhJWEUrQk42KzRWUEIyS2swYWNwZ2NVVXFSY01TYXNidElQOWhyCmNOWkh6a0lac1ppTTc1SlB4YWdxaWhkV3NnVFkxREFabS9wZmlUU3RuQTBWc2VXaU1KQ1A4SHlzN2EySkU4WWsKYlBxMC9zNDZhWGhGak5kTjRNV1h4T21kL2JsTzdLODZyNVdkOFNmQ1Q4QmxTQjJZMnNYRjBlWVZJZlhHY3lXTwpUQndmUEh6YUdQcnpCZkRwQWR4eFVBNTlQOUFkZloySXFaUjhmNWMrUy9IV1dEd2FiK0RQRzZmZXBYQ09XVXhTClpFMGMrdWJOTU5GNzJYWGlpUG9kRmxOdGZ3QnYwS0ZqUWRnZW44dW1UZFpMZlpSMVNUQWdqTWc2dDZsK2xsUFQKUXpuRTkvaU1LY3orVzF3elVtQlBaeXIrTG92S3p2M3ZMREFMWW4xT0x1dncxUW92c3Z5OFVOSEFORkJudng5MwovK3hGc1YrNW9lcHZHL0pzMUtaTStMcmtHU25HUzhBNSt2eitqUUptMTkvVVRBU0N6dU5KTjYrQnRjK2ZIWitECnR5b0VNWEl2Q0x1R2REWlovZXRPeFR0WEFnaFRlMFNOTmJYanEzY0FIZitrSkFXS3cvai84OWJEOWNQZ3o5MWQKZFZINTQ1WHgvamRLOWxTbW0raVZsajErS0RvcFRmYXJOb0xYa2tsNXRYSjQrSHNyTzVwNXJjb09mTkdHd0pKQgp5WHkzQmNkM0JIYVYrajBIcVJrazlXWGpPZnROUXdJREFRQUJBb0lDQVFDVVdqd2g3dGNpeDl4MmFTdTc4Q3NOCndoWFBwZkpqSk5ST2NNQ0cwSGpMcmxLRC9HL1Uyd2llcU1yZUN1Rm5hYWNLdEI1T1ltbnJ0bitIenR1dVE4UFEKSG1XRGxlQ0RMNVhqNDNYeTRmK25xZCtOVlpDSFU4VXAzUHVNSXh4ckUzMHJJRDdHeWFtdHl1VzdOT2R1clpoZwpnNHNSUm5TZUcyUVNneFY5L0tnaU5TWWwyVTNDejBLVmJyL2szcit5UlpGYStEVFQ5MmJyOTFFUWhDOE0ySVdqClFPR2oyS3F6RGpPSWMrVk90a0dTdlA5YzdZc1lOSkdVcGJaaEwxcjJzNDIycy9ySjM1RzZDS1J5aXhYRmJadzUKVkpXbkxPVGhlZVdqVkUyandadm5rRnhzWFVRK2JRQmk5NzFQV2RQdXBDZVRjWGdNazFCek41SFFJUy95VkkzYQpGeTlndlhSdTV0UUdqZmgwZWhWZ2NZbCtzNkgxZEhFTnZsSTEyZUlCaEZPa3prcmNSS2J1eE0vTDlXRjNjZ242CkhxYjdabUhOQU1lbUdRWEhYQUNQTjgwTnBjMjlnMUR1ZFhuRXYzb3ZnRzlvSytxZUF6RjA3OFRxOFhaMVVZNGQKSXczdysvYkxsTVBMNUlHMGd4bzdLdzU5d3pVbC92cTlQd0huSmhQY2hUZmRCMUV5WWRuQ2JLM3ZVM0pjRUc1RgpOYUtsYnVjK29HM3FhcmxyNllkWm1oMlNlYkg4OGI2Ukk0d0tkaDBNVGI0cVhvTkJzcWtQdVhPK0dPMkRBS3ROCnlSYlNCTnpQaytXTEpWQnY3YXNrSWRxL0E5SmlrU0NtUkFkNjhsQWs5L3ZheVhhMVAwMjRBcWpleGNOcnIvQzAKMzVUWVpURFhtejJDc1VkSWVxSERJUUtDQVFFQXlRdy9JTjBUK1hHcEl4OVhUVUNaeTFSaW5WRURibXcwMGFmTgo5a1RPZjF6R0d5MDQvSGR5amZWUEoyRXpXbE1LYmJpVVlac3dobStRcTd4SFd0Kzk0UVRRQ0dnaDg0VkkvaUxQCjhES3NVdEFtbDYwclA0NzBFNnRTRTB6SU44eWpRekNEVWdLMFZaREowTnhvaHFlM2Q1NllFM20wZXpuVUxOSzcKVHlHM1BkQmNSVGlWVmJLbkx3dUNIODcwR1Fma0FCOUJkTWNjTlp4N0crUmJMU25uMVhaV215TEpsQkZiY0VDSQpybGZCL2xoSnp1NjFuMHdDSmFwSFFZd0NsT3krcUJlaVhZWlNaclN0UGVOM09sSjg1aXJNTFFudzBldHZVbEZqCm1kODN1L2xaRnJ3SWFnd2ljWTNrV2tZZkhSQTFHSEprNzZIR0FjNDlESXJmRnl4b2ZRS0NBUUVBeDRLN3VDRkgKZ2sxMzBkOTRLRzgyUUFJSUdObURvRDNKUHpCNFRBVGRtVytrVE02SWFJNHFTRTRUbTVuT3BLL25EbDlDaDQyYgozSGtYY2hqSkFVamtONG9KN0N1ME9jblNzenc5UVpiUDJseVNMWkpRYWlOOXpBMzRwaEhuME1xZmU1TjRkb1NzCkZxajlsY0JQOUJNaS9UY1pPYkxnZ1BrT1ExcXk4QkZXWVNaU3IrYlJmMFRXUFo5a2pMemZ1MjZDeTVYblNwbUQKampOOHZjVXhEa1JQS0o5Z211dFVLZjlFaHhPb0hjWHZBMFVvQmc2V2hmTlFSZEYrZWpraXcrcXI1b2hlaVRNYgpTZHZubythZkZwWkNueVpSRXQ5dnpoRkdRVFczTHdEN0srMG9qaU1ySVJENW91VUJOWEk2QjdqV24zU0YwbURKCkdwc2h6ZnROeTFZNHZ3S0NBUUVBcG8zN3Vta01SQ2xTT3FPYk9vZWJJV1J1TWUvTWpPMGRzTlo0ZlYyeFNMZjkKOHNPN0l3UjlwWGNsTlBXRWluNmk5QlRtOEJtVjBMbWFPM3ZHRFZXd1F6c3VjTmg3ei9lS2FlZERKcldFSnpNRAoxY0lEUXl0VnJ2bk9DK2tmTVlMWmVpODFpM3BzRlRyV3hxM2g5alA1ZlNLb3ovR1NnRWQvTEFjRVgrRUpvaTc4ClVlZzNad0NUR2hsSm1ycGpaRjB5R0p2TUtVZE9hbWVSWWFFRG05M01qdjN6YjZBWktRNWNGeG1QWWdlWDBmTW8KYWtNOXVaTkpjQlNwNVhadEtSMGNNYnNxcXBvOXA1Smt0eEc3VTFqRTJoVjRncE5xcXkyRlVzZlVZTVFZc3lRMgpGdXg5ZUFWSGY1VlNLU3RRV1U1MC9pUyswL3JNUS9Dc2lMaC9hdjVDTFFLQ0FRQXk1K2FoK3N2V01aSUxHT3Y5CjFUS1FiblJHY3VtazcxNzBJcGZ2UGFhVlNla3dOOXFTWXdQaTR4a1pzTXNMTmw3TVNmNGR2RUl5cFNzWVQ3NnAKOTBGVDhvTEpvZlVnY2FDelh3RjZSTkxRTXFLUndpMkdoM3ZIbnlEOHJzRHBnMm5pRENUR2lOK29BSUtEdlVncApUT0MybjJKdVdIZjBNSmcxRTJWbzMrT2NjanpTNlNBM1N3Y25QZzVYNHJGcmo2MEw2VG5VelFyR005ajJTdVJUCmNaYUpGUEYvVmVCcHZ0cHJaTmFXa2pTRUx4Y2hSSU9mdGcrYllQTFdtTkdJRDg3QXliYmxad2JsZDVqSk4wVU0KYkZhZmFSVnlyVlJIemh5UTh2WEVwb2x3RWRreE8wUDc4ZXJnWjNKQmd0M1BycGdFbzZTcG8weHMzM3htcEdLYgpLV3JkQW9JQkFBaHBCRGFERGJ0M0JlMWxORHd1YVNpejVFZ0hQNitDS3l0U3NWcXp1ZFN2YkdCekx1TUhORk1qCklGQTAvdzJOWVMzRkFlY21WNHIxNHd5cUZ5eVNXWUJ0WktXK1ZwTzRqUHIzeGpJL1ZBZDE1SlpFdDlFLzY0QTgKWFVrd2kvU01NbEpBajNLU09NYWM1NXR3bVdJcGxIdklnY0E0RDlTdHNGOHphdWNIYlJWWlVadENZTDB3eWVRRQpLZG1TUDhxUGVZVU5SbFcrSk5xbGI4bk5BNC9GeWgyQWQxUGZGMkpuNXcwRjc3MldOSXVCaHZ5eGoyNEhaVDUxClpPbG43bDBGZlh0bzlNNFRCeDVaTlhWOS9kaS9SNnRJZ2FYMVZyQTV3b29rZVZJczYzemtzbUo0SzNQeFhpRVgKYmhld3NRaWtFdlJ4NDdDZ1hVa0t6S1ZOSXBYREozaz0KLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLQ==
