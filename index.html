<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Conduit</title>
  <base href="https://jordan-milner.github.io/angular-realworld-example-app/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=Titillium+Web:700|Source+Serif+Pro:400,700|Merriweather+Sans:400,700|Source+Sans+Pro:400,300,600,700,300italic,400italic,600italic,700italic" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="//demo.productionready.io/main.css">

<link rel="stylesheet" href="styles.34c57ab7888ec1573f9c.css"></head>
<body>
  <app-root>Loading...</app-root>
<script type="text/javascript" src="runtime.9c71f4baf75d5a9a2e77.js"></script><script type="text/javascript" src="polyfills.74c949fb901fde2a61b1.js"></script><script type="text/javascript" src="main.f3d8bb64fb27f07f3590.js"></script></body>



<script>
  (function(apiKey) {
    (function(p, e, n, d, o) {
      var v, w, x, y, z;
      o = p[d] = p[d] || {};
      o._q = [];
      v = ['initialize', 'identify', 'updateOptions', 'pageLoad'];
      for (w = 0, x = v.length; w < x; ++w)(function(m) {
        o[m] = o[m] || function() {
          o._q[m === v[0] ? 'unshift' : 'push']([m].concat([].slice.call(arguments, 0)));
        };
      })(v[w]);
      y = e.createElement(n);
      y.async = !0;
      y.src = 'https://cdn.pendo.io/agent/static/' + apiKey + '/pendo.js';
      z = e.getElementsByTagName(n)[0];
      z.parentNode.insertBefore(y, z);
    })(window, document, 'script', 'pendo');

    // Call this whenever information about your visitors becomes available
    // Please use Strings, Numbers, or Bools for value types.
    pendo.initialize({
      visitor: {
        id: "jordan" // Required if user is logged in
        // email:        // Optional
        // role:         // Optional

        // You can add any additional visitor level key-values here,
        // as long as it's not one of the above reserved names.
      },

      account: {
        id: 'ACCOUNT-UNIQUE-ID' // Highly recommended
        // name:         // Optional
        // planLevel:    // Optional
        // planPrice:    // Optional
        // creationDate: // Optional

        // You can add any additional account level key-values here,
        // as long as it's not one of the above reserved names.
      },
      events: {
        ready: function() {
          pendo.secondaryHomeViewBubble = '<div id="pendo-secondary-home-view-bubble" class="_pendo-secondary-home-view-bubble" style="position: absolute; border-radius: 20px; height: 26px; line-height: 0px; padding: 0px 10px; right: 20px; top: 50%; margin-top: -14px; box-sizing: content-box; background-color: rgb(236, 32, 89); display: block;"><div id="pendo-secondary-home-view-count" style="display: inline-block; vertical-align: middle; line-height: 26px; font-weight: 400; font-family: inherit; color: rgb(255, 255, 255); white-space: pre-wrap;"></div></div>';
          pendo.secondaryRCBadgeTemplate = '<div id="pendo-secondary-badge-bubble" class="pendo-resource-center-badge-secondary-notification-bubble" style="position: absolute; border-radius: 20px; line-height: 0px; height: 26px; box-sizing: content-box; top: -2px; left: -12px; padding: 0px 10px; margin-left: 0px; margin-top: 0px;">' +
            '<div class="pendo-secondary-notification-bubble-unread-count" style="font-weight: 400; font-family: inherit; height: 100%; display: inline-block; line-height: 26px; vertical-align: middle; color: rgb(255, 255, 255); white-space: pre-wrap;"></div>' + '</div> ';
          pendo.backUpPulseAnimation = '<style id="pendo-secondary-resource-center-bubble-animation">@keyframes pulse { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(1.6) } } .pendo-resource-center-badge-secondary-notification-bubble::before { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 100%; z-index: -1; animation: pulse 2s infinite; will-change: transform; }</style>';
          pendo.isSecondaryBadgeDrawn = false;
          pendo.alerts = 0;
          pendo.addRCMutationListener();
        }
      }
    });

    pendo.drawSecondaryRCBadge = function() {
      document
        .getElementsByClassName("_pendo-resource-center-badge-container")[0]
        .innerHTML += pendo.secondaryRCBadgeTemplate + pendo.backUpPulseAnimation;
      pendo.secondaryRCBadgeUnreadCount = document.getElementsByClassName('pendo-secondary-notification-bubble-unread-count')[0];
      pendo.updateSecondaryRCBadge();
      pendo.isSecondaryRCBadgeDrawn = true; 
    };
    
    pendo.drawSecondaryHomeViewBadge = function() {
      var targetModule = document.querySelector('[data-pendo-module-guide-id="LmGbUlAezONF1-hGE-kJh5BGDbg@RQEFDBOf2sqeN8xgZmibcIcrueU"] > ._pendo-text-link > ._pendo-row > .pendo-mock-flexbox-row > .pendo-mock-flexbox-element');
      if(targetModule.length){
        targetModule.innerHTML += pendo.secondaryHomeViewBubble; //need to update this one's guide-id to your custom rc module guide id
        pendo.secondaryHomeViewBadgeCountElem = document.getElementById('pendo-secondary-home-view-count')
        pendo.updateSecondaryHomeViewBadge();
        pendo.isSecondaryRCBadgeDrawn = true; 

      }
    }

    pendo.updateSecondaryRCBadge = function() {
      pendo.secondaryRCBadgeUnreadCount.innerText = pendo.alerts.length;
    }

    pendo.updateSecondaryHomeViewBadge = function() {
      pendo.secondaryHomeViewBadgeCountElem.innerText = pendo.alerts.length;
    }

    pendo.addRCMutationListener = function() {
      var target = document.querySelector('body');

      // create an observer instance
      var observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.addedNodes.length) {
            if (mutation.addedNodes[0].id == 'pendo-resource-center-container') {
              pendo.drawSecondaryHomeViewBadge();
              pendo.isSecondaryBadgeDrawn = true;
            } else if (mutation.addedNodes[0].classList.contains('_pendo-resource-center-badge-container')) {
              pendo.drawSecondaryRCBadge();
              pendo.isSecondaryRCBadgeDrawn = true;
            }
          }
        });
      });

      // configuration of the observer:
      var config = {
        attributeFilter: ['data-layout'],
        attributes: true,
        childList: true,
        characterData: true,
        subtree: false
      };

      // start the observer, pass in the target node, as well as the observer options
      observer.observe(target, config);

    }
    
    pendo.setAlerts = function(alertNum) {
      pendo.alerts = alertNum
       if(pendo.isSecondaryBadgeDrawn && pendo.alerts <= 0){ // if the badge is drawn but the alert number is now 0 or less
         pendo.removeSecondaryBadges()
       }else if(!pendo.isSecondaryBadgeDrawn && pendo.alerts > 0){ //if the badge isn't drawn and the number of alerts is greater than 0
         pendo.attemptToDrawSecondaryBadges()
       }else if(pendo.isSecondaryBadgeDrawn && pendo.alerts > 0){ // if the badge is drawn and the number of alerts is greater than 0
         pendo.attemptToUpdateSecondaryBadges()
       }
    }
    
    pendo.attemptToDrawSecondaryBadges = function(){
      pendo.drawSecondaryHomeViewBadge();
      pendo.drawSecondaryRCBadge();
    }
    
    pendo.attemptToUpdateSecondaryBadges = function(){
      pendo.updateSecondaryHomeViewBadge();
      pendo.updateSecondaryRCBadge();
    }

    
    pendo.removeSecondaryBadges = function() {
      var homeViewBubble = document.getElementById('pendo-secondary-home-view-bubble')
      var rcBadgeBubble = document.getElementById('pendo-secondary-badge-bubble')
      if(homeViewBubble){
        homeViewBubble.parentNode.removeChild(homeViewBubble) 
      }
      if(rcBadgeBubble){
        rcBadgeBubble.parentNode.removeChild(rcBadgeBubble) 
      }
      pendo.isSecondaryRCBadgeDrawn = false; 
    }


    
  })('d9e30fcc-6ddc-48bd-7843-8bce634e1b8a');
</script>

</html>
